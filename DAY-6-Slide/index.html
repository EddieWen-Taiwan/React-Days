<!DOCTYPE html>
<html>
<head>

	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />

	<meta name="description" content="React.js library" />
	<meta name="author" content="Eddie Wen | 溫奕書" />
	<meta name="URL" content="http://github.eddiewen.me/React-Days/DAY-6-Slide/" />
	<meta name="image" content="https://facebook.github.io/react/img/logo_og.png" />

	<!-- Open Graph -->
	<meta property="og:site_name" content="React Slide" />
	<meta property="og:title" content="React Slide" />
	<meta property="og:type" content="website" />
	<meta property="og:url" content="http://github.eddiewen.me/React-Days/DAY-6-Slide/" />
	<meta property="og:image" content="https://facebook.github.io/react/img/logo_og.png" />
	<meta property="og:description" content="React.js library" />

	<title>React Slide</title>
	<link rel="Shortcut Icon" type="image/x-icon" href="https://facebook.github.io/react/img/logo_og.png" />

	<!-- React.js -->
	<script type="text/javascript" src="../node_modules/react/dist/react.min.js"></script>
	<script type="text/javascript" src="../node_modules/react-dom/dist/react-dom.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.6.15/browser.min.js"></script>

	<!-- my CSS -->
	<style type="text/css">
	.arrow,.dots-wrapper{text-align:center;position:absolute}.arrow,.dot{cursor:pointer}.arrow{width:120px;height:120px;border-radius:60px;background-color:rgba(0,0,0,.1);top:50%;margin-top:-60px;left:30px;-webkit-transition:all .3s;-moz-transition:all .3s;-o-transition:all .3s;transition:all .3s}.arrow.right{left:auto;right:30px;transform:rotate(180deg)}.arrow img{margin-left:-10px;margin-top:20px;-webkit-transition:all .3s;-moz-transition:all .3s;-o-transition:all .3s;transition:all .3s}.arrow:hover img{margin-left:-18px}.arrow:hover{background-color:rgba(0,0,0,.25)}.dots-wrapper{width:100%;left:0;bottom:20px}.dot{width:10px;height:10px;display:inline-block;border-radius:5px;margin:0 3px;background-color:rgba(0,0,0,.2)}.dot:hover{background-color:rgba(0,0,0,.4)}.dot.active{background-color:#2196F3}.pic-box{width:450px;height:300px;background-color:#00f;margin:160px auto 0;overflow:hidden}.pic-wrapper{width:1350px;height:300px;margin-left:-450px;font-size:0}.pic-wrapper.prev{margin-left:0;-webkit-transition:all .7s;-moz-transition:all .7s;-o-transition:all .7s;transition:all .7s}.pic-wrapper.next{margin-left:-900px;-webkit-transition:all .7s;-moz-transition:all .7s;-o-transition:all .7s;transition:all .7s}.pic-wrapper img{width:450px;display:inline-block}
	</style>

</head>
<body>

	<div id="container"></div>

	<script type="text/babel">
		var slidePic = [
			{ id: 1, file: "handkerchief.png" },
			{ id: 2, file: "creeper.png" },
			{ id: 3, file: "db690a9.png" },
			{ id: 4, file: "programmer.png" }
		];

		var PicBox = React.createClass({
			handleWrapperClass: function() {
				return this.props.moveClass == null ? "pic-wrapper" : "pic-wrapper "+this.props.moveClass;
			},
			render: function() {
				var imgTag = [];
				var currentPicId = this.props.currentPic;
				// prev
				var prevId = currentPicId == 1 ? this.props.slidePic.length : currentPicId-1;
				var path = "images/"+this.props.slidePic[prevId-1].file;
				imgTag.push( <img src={path} key={prevId} /> );
				// current
				var path = "images/"+this.props.slidePic[currentPicId-1].file;
				imgTag.push( <img src={path} key={currentPicId} /> );
				// next
				var nextId = currentPicId == this.props.slidePic.length ? 1 : currentPicId+1;
				var path = "images/"+this.props.slidePic[nextId-1].file;
				imgTag.push( <img src={path} key={nextId} /> );

				return (
					<div className="pic-box">
						<div className={this.handleWrapperClass()}>
							{imgTag}
						</div>
					</div>
				);
			}
		});

		var Controller = React.createClass({
			render: function() {
				return (
					<div className="controller">
						<div className="arrow left" onClick={this.props.onClick.bind(null, "prev")}>
							<img src="images/left-arrow.png" />
						</div>
						<div className="arrow right" onClick={this.props.onClick.bind(null, "next")}>
							<img src="images/left-arrow.png" />
						</div>
					</div>
				);
			}
		});

		var DotsWrapper = React.createClass({
			render: function() {
				var dots = [];
				for( var i = 0; i < this.props.sliderNumber; i++ ) {
					var dotClass = i == this.props.currentPic-1 ? "dot active" : "dot";
					dots.push( <div className={dotClass}></div> );
				}
				return (
					<div className="dots-wrapper">
						{dots}
					</div>
				);
			}
		});

		var Slide = React.createClass({
			getInitialState: function() {
				return ({
					currentPicId: 1,
					slideMove: null
				});
			},
			handleSlide: function( direction ) {
				this.setState({ slideMove: direction });
				setTimeout( function(){
					var newPicId = this.state.currentPicId;
					if( direction == "prev" ) {
						newPicId = newPicId == 1 ? this.props.pic.length : newPicId-1;
					} else {
						newPicId = newPicId == this.props.pic.length ? 1 : newPicId+1;
					}
					this.setState({ currentPicId: newPicId, slideMove: null });
				}.bind(this), 700);
			},
			render: function() {
				return (
					<div className="slider">
						<PicBox moveClass={this.state.slideMove} slidePic={this.props.pic} currentPic={this.state.currentPicId} />
						<Controller onClick={this.handleSlide} />
						<DotsWrapper sliderNumber={this.props.pic.length} currentPic={this.state.currentPicId} />
					</div>
				);
			}
		});

		ReactDOM.render(
			<Slide pic={slidePic} />, document.getElementById('container')
		);
	</script>

</body>
</html>
